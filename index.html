<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Corey's Achilles Protocol</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4A6B82">
    <meta name="description" content="Personal Achilles tendon repair rehabilitation tracker with physiotherapy exercises">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Achilles">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,500;9..144,600&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="header-brand">Corey's Achilles</div>
        <div class="header-phase" id="headerPhase">Set Surgery Date</div>
    </header>

    <main class="main">
        <!-- Setup Screen (shown if no surgery date) -->
        <div class="tab-content" id="setup">
            <div class="setup-card">
                <h2>Welcome, Corey</h2>
                <p>Enter your surgery date to track your recovery journey</p>
                <input type="date" class="date-input" id="surgeryDateInput">
                <button class="btn" id="saveSurgeryDate">Start Tracking</button>
            </div>

            <div class="card" style="margin-top: var(--spacing-md);">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
                    </span>
                    <span class="card-title">Provider</span>
                </div>
                <div class="provider-info">
                    <div class="provider-row">
                        <span class="provider-label">Physician</span>
                        <span class="provider-value">Tyler Hauer, MD</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Institution</span>
                        <span class="provider-value">UHN – Toronto Western Hospital</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Address</span>
                        <span class="provider-value">399 Bathurst Street, Toronto, ON, M5T 2S8</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Contact</span>
                        <span class="provider-value">Tel: (416) 603-5111 | Fax: (416) 603-3437</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Adapted from</span>
                        <span class="provider-value" style="font-style: italic;">Volker Musahl, MD</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- TODAY TAB -->
        <div class="tab-content" id="today">
            <div class="hero">
                <!-- Top Meta Row -->
                <div class="hero-meta">
                    <span id="heroPhase">Phase —</span>
                    <span>•</span>
                    <span id="heroWeek">Week —</span>
                </div>

                <!-- The Main Focus (Dynamic) -->
                <div class="hero-label">Current Goal</div>
                <div class="hero-focus" id="heroFocus">
                    Recovering...
                </div>

                <!-- Stats Row -->
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="dayCount">—</div>
                        <div class="hero-stat-label">Day</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="streakCount">0</div>
                        <div class="hero-stat-label">Streak</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="progressPercent">0%</div>
                        <div class="hero-stat-label">Recovery</div>
                    </div>
                </div>
                
                <!-- Integrated Progress Bar (Optional, simpler look) -->
                <div style="background: rgba(255,255,255,0.2); height: 4px; margin-top: 1rem; width: 100%;">
                    <div id="progressFill" style="background: var(--color-green); height: 100%; width: 0%;"></div>
                </div>
            </div>

            <div id="todayContent">
                <!-- Dynamically populated based on current phase -->
            </div>
        </div>

        <!-- PROTOCOL TAB -->
        <div class="tab-content" id="protocol">
            <!-- Compact Horizontal Timeline -->
            <div class="card" style="margin-bottom: var(--spacing-md); padding: var(--spacing-md);">
                <div id="currentPhaseBanner" class="current-phase-banner">
                    <!-- Dynamically populated -->
                </div>
                <div class="timeline-horizontal" id="journeyTimeline">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Phase Details -->
            <div id="phaseContent">
                <!-- Dynamically populated based on current phase -->
            </div>

            <!-- Return Criteria at bottom -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                    </span>
                    <span class="card-title card-title-blue">Return to Sport</span>
                </div>
                <div class="note">
                    <strong>NOTE:</strong> requires surgeon approval
                </div>
                <div class="milestone">
                    <span class="milestone-activity">Jog/run</span>
                    <span class="milestone-time">6-7 months</span>
                </div>
                <div class="milestone">
                    <span class="milestone-activity">Low to medium sports</span>
                    <span class="milestone-time">6-7 months</span>
                </div>
                <div class="milestone">
                    <span class="milestone-activity">High level sports</span>
                    <span class="milestone-time">9 months</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
                    </span>
                    <span class="card-title card-title-green">Return to Work</span>
                </div>
                <div class="note">
                    <strong>NOTE:</strong> requires surgeon approval
                </div>
                <div class="milestone">
                    <span class="milestone-activity">Sedentary duty</span>
                    <span class="milestone-time">2-4 weeks</span>
                </div>
                <div class="milestone">
                    <span class="milestone-activity">Light duty</span>
                    <span class="milestone-time">3 months</span>
                </div>
                <div class="milestone">
                    <span class="milestone-activity">Full duty (medium/heavy)</span>
                    <span class="milestone-time">6-9 months</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                    </span>
                    <span class="card-title">Sport Intensity Levels</span>
                </div>
                <div class="sport-row">
                    <span class="sport-level low">Low</span>
                    <span class="sport-list">Golf, swimming, bowling, nature sports, fitness sports, and yoga</span>
                </div>
                <div class="sport-row">
                    <span class="sport-level medium">Medium</span>
                    <span class="sport-list">Rowing, cycling, cross-country skiing, downhill skiing</span>
                </div>
                <div class="sport-row">
                    <span class="sport-level high">High</span>
                    <span class="sport-list">Running, basketball, football, tennis, volleyball, soccer, baseball</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>
                    </span>
                    <span class="card-title card-title-blue">Prerequisites for Return</span>
                </div>
                <ul class="list">
                    <li class="list-item">Full painless ROM</li>
                    <li class="list-item">Full strength</li>
                    <li class="list-item">Able to perform all sports-specific drills</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M10 9H8"></path><path d="M16 9h-2"></path><path d="M8 13h2"></path><path d="M16 13h-2"></path><path d="M8 17h2"></path><path d="M16 17h-2"></path></svg>
                    </span>
                    <span class="card-title">Provider Information</span>
                </div>
                <div class="provider-info">
                    <div class="provider-row">
                        <span class="provider-label">Physician</span>
                        <span class="provider-value">Tyler Hauer, MD</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Institution</span>
                        <span class="provider-value">UHN – Toronto Western Hospital</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Address</span>
                        <span class="provider-value">399 Bathurst Street, Toronto, ON, M5T 2S8</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Contact</span>
                        <span class="provider-value">Tel: (416) 603-5111 | Fax: (416) 603-3437</span>
                    </div>
                    <div class="provider-row">
                        <span class="provider-label">Adapted from</span>
                        <span class="provider-value" style="font-style: italic;">Volker Musahl, MD</span>
                    </div>
                </div>
            </div>

            <div class="disclaimer">
                This protocol provides general guidelines for rehabilitation progression. Individual patient progress may vary, and all advancement should be discussed with and approved by the treating surgeon.
            </div>
        </div>

        <!-- PHYSIO TAB -->
        <div class="tab-content" id="physio">
            <div class="card">
                <!-- Header with contact icon -->
                <div class="physio-header">
                    <div class="physio-header-main">
                        <h2 class="section-title" style="margin-bottom: 0;">Sonia's Exercises</h2>
                        <button class="contact-icon-btn" id="openContactModal" aria-label="Contact info">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                                <circle cx="12" cy="8" r="2"></circle>
                                <path d="M15 13a3 3 0 0 0-6 0"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Date Navigation -->
                    <div class="date-nav">
                        <button class="date-nav-btn" id="prevDayBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                        </button>
                        <span class="date-nav-current" id="currentDateDisplay">Today</span>
                        <button class="date-nav-btn" id="nextDayBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </button>
                    </div>

                    <p id="physioPhaseWeek" class="physio-phase-week"></p>
                </div>

                <!-- Prescription date tabs -->
                <div class="prescription-tabs" id="sessionTabs">
                    <!-- Dynamically populated -->
                </div>

                <!-- Exercise content (will be swapped based on prescription) -->
                <div id="prescriptionContent">
                    <!-- Dynamically populated by app.js -->
                </div>
            </div>
        </div>

        <!-- Contact Modal -->
        <div class="modal-overlay" id="contactModal">
            <div class="modal">
                <button class="modal-close" id="closeContactModal" aria-label="Close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <div class="modal-content">
                    <div class="modal-avatar">SG</div>
                    <h3 class="modal-name">Sonia Gavrilova</h3>
                    <p class="modal-role">Physiotherapist</p>
                    
                    <div class="modal-divider"></div>
                    
                    <div class="modal-clinic">
                        <p class="modal-clinic-name">Axis Therapy & Performance</p>
                        <p class="modal-clinic-address">8 Mercer St, Unit 3, Toronto</p>
                    </div>
                    
                    <a href="tel:+14169792000" class="modal-call-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        Call (416) 979-2000
                    </a>
                    
                    <button class="modal-email-btn" id="copyEmailBtn" data-email="sonia.the.physiotherapist@gmail.com">
                        <span class="email-icon">✉️</span>
                        <span class="email-text">Copy Sonia's Email</span>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item" data-tab="today">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
            </span>
            <span>Today</span>
        </button>
        <button class="nav-item" data-tab="physio">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                </svg>
            </span>
            <span>Physio</span>
        </button>
        <button class="nav-item" data-tab="protocol">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </span>
            <span>Protocol</span>
        </button>
    </nav>

    <!-- App Logic -->
    <script src="app.js"></script>
</body>
</html>
